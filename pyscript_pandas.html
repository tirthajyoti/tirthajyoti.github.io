<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>PyScript Linear Algebra</title>

     <link rel="icon" type="image/png" href="favicon.png" />
	 <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
	 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	<py-env>
- matplotlib
- pandas
- lxml
	</py-env>
	<style>
		.pd-table {
		  font-family: Arial, Helvetica, sans-serif;
		  border-collapse: collapse;
		  width: 75%;
		}
		
		.pd-table td, .pd-table th {
		  border: 1px solid #ddd;
		  padding: 4px;
		}
		
		.pd-table tr:nth-child(even){background-color: #f2f2f2;}
		
		.pd-table tr:hover {background-color: #ddd;}
		
		.pd-table th {
		  padding-top: 6px;
		  padding-bottom: 6px;
		  text-align: left;
		  background-color: #04AA6D;
		  color: white;
		}
		</style>
  </head>

  <body style="margin: 25px 75px 25px 75px;">
	<div class="container-fluid">
	<div class="p-5 text-center bg-light">
		<h1 class="mb-3">Pandas operations Demo using PyScript</h1>
		<p>Demo developed by <a href="https://www.linkedin.com/in/tirthajyoti-sarkar-2127aa7/">Dr. Tirthajyoti sarkar</a></p>
		<a class="btn btn-primary" href="https://www.anaconda.com/blog/pyscript-python-in-the-browser" role="button">Check out the announcement from Anaconda about PyScript framework</a>
	  </div>
	  <br>
<div class="alert alert-primary" role="alert">
	<h3><a href="https://github.com/pyscript/pyscript">PyScript</a> is aswesome, it just takes a few seconds to load...</h3>
	<p>To provide the power of Python on your browser, this technology needs to load <b>a special virtual machine and all necessary Python modules</b></p>
	<p>So, sit back and relax. We are loading the modules and generating some random variables as a test. 
		You can start interacting with the page when you see a histogram of those random variates displayed below.</p>
	<p> We promise that, once loaded, your interactions will be <b>Python-powered and fast! </b>You can also read more about this awesome framework here at Anaconda's engineering blog.</p>
	<a class="btn btn-primary" href="https://engineering.anaconda.com/2022/04/welcome-pyscript.html" role="button">Anaconda Engineering Blog about PyScript</a>
  </div>
	<h2 style="border:5px; border-radius: 10px; padding:10px;background-color:gray; color:cyan">Test: Random integers</h2>
	<h4>These are 100 random integers, generated by <b><code>NumPy</code></b></h4>
	<p>We literally wrote this pure Python code in the HTML file to generate these numbers! If you don't believe us, just right-click and view the source code of this page :-)
		The only thing to note here is the <code>&lt;py-script&gt;&lt;/py-script&gt;</code> tags around the code block.
	</p>
	<pre style="background-color:rgb(187, 199, 199); padding: 10px; font-size: 1.2em; width: 50%; text-align:left;">
<code>&lt;py-script&gt;
import numpy as np
integers = np.random.randint(0,100,100)
print(integers)
&lt;/py-script&gt;</code></pre>
    <py-script>
import numpy as np
integers = np.random.randint(0,100,100)
print(integers)
    </py-script>
<br>
	<h4>This is the histogram of those random integers, generated by <b><code>Matplotlib</code></b></h4>
	<p>You can do all the usual <code>Matplotlib</code> tweaks and tricks with the visualization as you would in a normal Python script or Jupyter Notebook.
		Here, we have just set the <code>dpi=150</code> and <code>figsize=(5,2)</code> inside the <code>plt.subplots()</code> function.</p>
		<p>This code is inline too i.e., embedded with this HTML. So, feel free to check it out. The last line of the Python code block is just the figure object <code>fig1</code>.
			This tells the PyScript framework to output the object/image (it detects the type intelligently) to the corresponding <code>div</code> section.
		</p>
<div class="container-md">
<py-script>
import matplotlib.pyplot as plt
fig1,ax1 = plt.subplots(1,1,dpi=150,figsize=(5,2))
ax1.hist(integers,bins=20,edgecolor='k',color='blue')
ax1.set_title("Histogram of random integers",fontsize=11)
fig1
</py-script>
</div>
<br>
<h2 style="border:5px; border-radius: 10px; padding:10px;background-color:gray; color:cyan">Pandas</h2>
Let's generate a Pandas DataFrame with some random nunbers (drawn from the ubiquitous Gaussian Normal distribution).
<div><button id="pd_table" style="margin-top: 10px;margin-bottom: 10px;" type="button" class="btn btn-primary" pys-onClick="show_table">
	Generate a Pandas DataFrame</div>
<br>
<div id="pandas-output"></div>
<br>
Interested in the statistics of this dataset?
<div><button id="table_stats" style="margin-top: 10px;margin-bottom: 10px;" type="button" class="btn btn-primary" pys-onClick="show_stats">
	Show DataFrame stats</div>
<br>
<div id="pandas-ops"></div>
<br>
<py-script>
import pandas as pd, numpy as np
from js import document

def random_table(n_cols=5,n_rows=20,*ags, **kws):
	cols = ['Col-'+str(i) for i in range(1,n_cols+1)]
	idx = ['Row-'+str(i) for i in range(1,n_rows+1)]
	data = np.round(np.random.normal(size=(n_rows,n_cols)),2)
	df = pd.DataFrame(data,columns=cols,index=idx)
	return df

def show_table(*ags, **kws):
	out = Element('pandas-output')
	random_df = random_table()
	out.write(random_df.to_html(classes='pd-table'))

def show_stats(*ags, **kws):
	out = Element('pandas-ops')
	input_div = document.getElementById("pandas-output")
	html_data = input_div.children[0].outerHTML
	df = pd.read_html(html_data,flavor='lxml')[0]
	stats_df = df.describe()
	out.write(stats_df.to_html(classes='pd-table'))
	#out.write(stats_df.)
</py-script>
</div>
</body>
  
</html>